define(function(){require.config({paths:{jquery:"//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min"}});var j=$("#strings");var h=$("#toolbar");var g=h.find("#editor");
var b={active:null};var a={tags:{strong:{},b:{},i:{},em:{},br:{},p:{},div:{},span:{},ul:{},ol:{},li:{},a:{set_attributes:{target:"_blank",rel:"nofollow"},check_attributes:{href:"url"}}}};
String.prototype.trimWith=function(k){k=k||"s";var l=new RegExp("^\\"+k+"+|"+k+"+$","gm");return this.replace(l,"");};function d(k){k=k||document.body;
$(k).find("form.save").submit(function(n){n.preventDefault();var l=$(this);var m=l.serializeArray();$.each(m,function(p,o){o.value=o.value.trimWith("<br>");
});$(b.active).find("div:last").html(m[0].value);$.post(this.action,m,function(o){l.replaceWith(o);d(g);setTimeout(function(){var p=$(b.active).next("li");
if(p.length){location.hash=$(b.active).next("li").attr("id");}},300);});});$(k).find("textarea").each(function(){var l=new wysihtml5.Editor(this,{toolbar:"editor-tools",parserRules:a});
});$(k).find("[autofocus]").focus();console.log(k);$(k).find("#copy-current").click(function(){console.log("click");return false;});}function i(k){$(".active").removeClass("active");
k.addClass("active");b.active=k;}function f(n){var m=n.attr("id");var l=document.createElement("a");l.href=location.href;var k=l.pathname+"/"+location.hash.replace("#","");
i(n);h.show();$.get(k,function(o){h.removeClass("loading");g.html(o);d(g);});}function c(){var k,m,l;m=location.hash;k=location.hash.replace("#","");if(location.hash.length==1){return false;
}l=$(m);if(l.length){f(l);}}window.onhashchange=c;c();if(location.hash==""){var e=$("ul#strings li:first");if(e.length){location.hash=e.attr("id");}}j.on("click","li",function(k){k.preventDefault();
location.hash=$(this).attr("id");});require(["keys"],function(k){k.init("ul#strings li");});return b;});