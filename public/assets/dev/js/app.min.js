define(function(){require.config({paths:{jquery:"//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min"}});var i=$("#strings");var g=$("#toolbar");var f=g.find("#editor");
var a={active:null};String.prototype.trimWith=function(j){j=j||"s";var k=new RegExp("^\\"+j+"+|"+j+"+$","gm");return this.replace(k,"");};function b(j){j=j||document.body;
$(j).find("form.save").submit(function(m){m.preventDefault();var k=$(this);var l=k.serializeArray();$.each(l,function(o,n){n.value=n.value.trimWith("<br>");
});$(a.active).find("div:last").html(l[0].value);$.post(this.action,l,function(n){k.replaceWith(n);b(f);setTimeout(function(){var o=$(a.active).next("li");
if(o.length){location.hash=$(a.active).next("li").attr("id");}},300);});});$(j).find("textarea").each(function(){var k=new wysihtml5.Editor(this,{toolbar:"editor-tools",parserRules:wysihtml5ParserRules});
$(j).find("#copy-current").click(function(){var l=$(".msgid").html();k.setValue(l);return false;});});$(j).find("[autofocus]").focus();}function h(j){$(".active").removeClass("active");
j.addClass("active");a.active=j;}function e(m){var l=m.attr("id");var k=document.createElement("a");k.href=location.href;var j=k.pathname+"/"+location.hash.replace("#","");
h(m);g.show();$.get(j,function(n){g.removeClass("loading");f.html(n);b(f);});}function c(){var j,l,k;l=location.hash;j=location.hash.replace("#","");if(location.hash.length==1){return false;
}k=$(l);if(k.length){e(k);}}window.onhashchange=c;c();if(location.hash==""){var d=$("ul#strings li:first");if(d.length){location.hash=d.attr("id");}}i.on("click","li",function(j){j.preventDefault();
location.hash=$(this).attr("id");});require(["keys"],function(j){j.init("ul#strings li");});return a;});